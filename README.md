# üìä Gestor Suro Dashboard

> Dashboard de an√°lisis de migraci√≥n de clientes Nutresa vs Nexo con conexi√≥n en tiempo real a Google Sheets

[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/jvelezp13/gestor-suro-dashboard)

## üöÄ Demo en Vivo

**URL del Proyecto**: [https://github.com/jvelezp13/gestor-suro-dashboard](https://github.com/jvelezp13/gestor-suro-dashboard)

## ‚ú® Caracter√≠sticas

- üìà **Visualizaciones Interactivas** con Chart.js
- üó∫Ô∏è **Mapas Geogr√°ficos** con Leaflet.js
- üìä **An√°lisis Financiero** en tiempo real
- üîÑ **Conexi√≥n Google Sheets** autom√°tica
- üì± **Dise√±o Responsive** para todos los dispositivos
- üéØ **An√°lisis de Migraci√≥n** Nutresa vs Nexo
- üìã **Filtros Avanzados** y b√∫squeda
- üí∞ **C√°lculos Financieros** autom√°ticos

## üõ†Ô∏è Tecnolog√≠as

- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **Visualizaciones**: Chart.js, Leaflet.js
- **APIs**: Google Sheets API
- **Despliegue**: Vercel
- **Control de Versiones**: Git + GitHub

## üì¶ Instalaci√≥n Local

```bash
# Clonar el repositorio
git clone https://github.com/jvelezp13/gestor-suro-dashboard.git
cd gestor-suro-dashboard

# Servir archivos localmente
python3 -m http.server 8000
# o con Node.js
npx serve .
```

## ‚öôÔ∏è Configuraci√≥n

1. **Copia el archivo de configuraci√≥n**:
   ```bash
   cp config.example.js config.js
   ```

2. **Edita `config.js` con tus credenciales**:
   ```javascript
   const CONFIG = {
       SHEET_ID: 'tu-sheet-id-aqui',
       API_KEY: 'tu-api-key-aqui',
       // ... m√°s configuraciones
   };
   ```

3. **Configura Google Sheets API**:
   - Ve a [Google Cloud Console](https://console.cloud.google.com/)
   - Habilita Google Sheets API
   - Crea una API Key
   - Configura las restricciones necesarias

## üöÄ Despliegue en Vercel

### Opci√≥n 1: Deploy Autom√°tico
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https://github.com/jvelezp13/gestor-suro-dashboard)

### Opci√≥n 2: Deploy Manual
```bash
# Instalar Vercel CLI
npm i -g vercel

# Deploy desde el directorio del proyecto
vercel
```

### Variables de Entorno en Vercel
Configura estas variables en tu dashboard de Vercel:
- `GOOGLE_SHEETS_API_KEY`
- `GOOGLE_SHEET_ID`

## üìä Uso

1. **Conectar con Google Sheets**
   - Haz clic en "Conectar" en el header
   - Verifica que los datos se carguen correctamente

2. **Explorar Datos**
   - **Dashboard**: Vista general con m√©tricas clave
   - **Tabla**: Datos detallados con filtros
   - **Poblaci√≥n**: An√°lisis por ubicaci√≥n geogr√°fica
   - **Financiero**: C√°lculos y proyecciones
   - **Mapa**: Visualizaci√≥n geogr√°fica

3. **Filtros Disponibles**
   - Por tipo de atenci√≥n (Nutresa/Nexo)
   - Por regi√≥n geogr√°fica
   - Por rango de ventas
   - B√∫squeda por nombre de cliente

## üìÅ Estructura del Proyecto

```
gestor-suro-dashboard/
‚îú‚îÄ‚îÄ index.html          # P√°gina principal
‚îú‚îÄ‚îÄ app.js             # L√≥gica de la aplicaci√≥n
‚îú‚îÄ‚îÄ styles.css         # Estilos CSS
‚îú‚îÄ‚îÄ config.js          # Configuraci√≥n (no incluido en repo)
‚îú‚îÄ‚îÄ config.example.js  # Ejemplo de configuraci√≥n
‚îú‚îÄ‚îÄ vercel.json        # Configuraci√≥n de Vercel
‚îú‚îÄ‚îÄ .gitignore         # Archivos ignorados por Git
‚îî‚îÄ‚îÄ README.md          # Este archivo
```

## üîí Seguridad

- ‚úÖ API Keys protegidas con `.gitignore`
- ‚úÖ Headers de seguridad configurados
- ‚úÖ Validaci√≥n de datos de entrada
- ‚úÖ Configuraci√≥n de CORS apropiada

## ü§ù Contribuir

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## üìù Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE](LICENSE) para detalles.

## üë®‚Äçüíª Autor

**Julian Velez** - [@jvelezp13](https://github.com/jvelezp13)

---

‚≠ê ¬°No olvides dar una estrella al proyecto si te fue √∫til!

## üìã Requisitos Previos

### 1. Google Sheets API

1. Ve a [Google Cloud Console](https://console.cloud.google.com/)
2. Crea un nuevo proyecto o selecciona uno existente
3. Habilita la **Google Sheets API**
4. Crea credenciales (API Key)
5. Configura las restricciones de la API Key para mayor seguridad

### 2. Estructura de Datos en Google Sheets

Tu hoja de c√°lculo debe tener las siguientes columnas (nombres flexibles):

| Columna | Nombres Alternativos | Descripci√≥n |
|---------|---------------------|-------------|
| Cliente | cliente | Nombre del cliente |
| Tipo Cliente | tipo_cliente, tipo | Nutresa/Nexo o Directa/Indirecta |
| Region | region | Regi√≥n geogr√°fica |
| Volumen | volumen | Volumen de ventas/transacciones |
| Valor | valor | Valor monetario |

**Ejemplo de estructura:**
```
Cliente          | Tipo Cliente | Region | Volumen | Valor
Empresa ABC      | Nutresa      | Norte  | 1500    | 75000
Distribuidora XYZ| Nexo         | Sur    | 800     | 40000
```

## üõ†Ô∏è Instalaci√≥n y Configuraci√≥n

### Paso 1: Preparar los archivos

1. Descarga todos los archivos del proyecto
2. Col√≥calos en una carpeta en tu servidor web o abre `index.html` directamente

### Paso 2: Configurar Google Sheets

1. Abre el dashboard en tu navegador
2. Haz clic en **"Conectar a Google Sheets"**
3. Completa la configuraci√≥n:
   - **ID de la Hoja**: Copia el ID desde la URL de tu Google Sheet
     ```
     https://docs.google.com/spreadsheets/d/[ID_AQUI]/edit
     ```
   - **Rango de Datos**: Por defecto `A1:Z1000` (ajusta seg√∫n necesites)
   - **API Key**: Tu clave de API de Google

### Paso 3: Verificar la conexi√≥n

- El estado de conexi√≥n debe cambiar a "Conectado" (verde)
- Los datos deben cargarse autom√°ticamente
- Las m√©tricas y gr√°ficos deben actualizarse

## üìä Uso del Dashboard

### M√©tricas Principales

- **Clientes Nutresa**: Total de clientes con atenci√≥n directa
- **Clientes Nexo**: Total de clientes con atenci√≥n indirecta
- **Potencial Migraci√≥n**: Clientes candidatos para migrar
- **Impacto Estimado**: Valor potencial de las migraciones

### Filtros Disponibles

- **Tipo de Cliente**: Todos, Nutresa, Nexo
- **Regi√≥n**: Din√°mico basado en tus datos
- **Per√≠odo**: √öltimos 30/90/180 d√≠as, √∫ltimo a√±o

### Visualizaciones

1. **Distribuci√≥n de Clientes**: Gr√°fico de barras/circular
2. **Tendencia de Migraci√≥n**: L√≠nea temporal
3. **An√°lisis Regional**: Distribuci√≥n por regiones
4. **Matriz de Oportunidades**: Scatter plot volumen vs valor

### Tabla de Datos

- **B√∫squeda**: Filtra clientes en tiempo real
- **Exportaci√≥n**: Descarga datos en formato CSV
- **Detalles**: Ve informaci√≥n completa de cada cliente

## üîß Personalizaci√≥n

### Modificar Criterios de Migraci√≥n

En `app.js`, busca la funci√≥n `updateMetrics()` y ajusta los criterios:

```javascript
// Ejemplo: cambiar umbral de volumen para migraci√≥n
const migrationPotential = nexoClients.filter(item => {
    const volume = parseFloat(item.Volumen || item.volumen || 0);
    return volume > 1000; // Cambiar este valor
});
```

### Agregar Nuevas M√©tricas

1. A√±ade el HTML en `index.html`:
```html
<div class="metric-card">
    <div class="metric-icon custom">
        <i class="fas fa-chart-bar"></i>
    </div>
    <div class="metric-content">
        <h3>Nueva M√©trica</h3>
        <span id="newMetric" class="metric-value">-</span>
        <span class="metric-label">Descripci√≥n</span>
    </div>
</div>
```

2. Actualiza el CSS en `styles.css`:
```css
.metric-icon.custom {
    background: #your-color;
}
```

3. Calcula la m√©trica en `app.js`:
```javascript
// En updateMetrics()
const newMetricValue = this.filteredData.filter(/* tu l√≥gica */).length;
document.getElementById('newMetric').textContent = newMetricValue;
```

### Personalizar Colores

Modifica las variables CSS en `styles.css`:

```css
:root {
    --nutresa-color: #e74c3c;  /* Color Nutresa */
    --nexo-color: #27ae60;     /* Color Nexo */
    --migration-color: #f39c12; /* Color migraci√≥n */
    /* ... otros colores */
}
```

## üîí Seguridad

### Mejores Pr√°cticas

1. **Restricciones de API Key**:
   - Limita por dominio en Google Cloud Console
   - Restringe a Google Sheets API √∫nicamente

2. **Datos Sensibles**:
   - No incluyas informaci√≥n confidencial en el repositorio
   - Usa variables de entorno para producci√≥n

3. **Permisos de Google Sheets**:
   - Configura permisos de solo lectura cuando sea posible
   - Usa cuentas de servicio para mayor control

## üö® Soluci√≥n de Problemas

### Error de Conexi√≥n

**Problema**: "Error al conectar con Google Sheets"

**Soluciones**:
1. Verifica que la API Key sea correcta
2. Confirma que Google Sheets API est√© habilitada
3. Revisa las restricciones de la API Key
4. Verifica que el ID de la hoja sea correcto

### Datos No Se Cargan

**Problema**: Dashboard muestra datos vac√≠os

**Soluciones**:
1. Verifica el rango de datos (ej: A1:Z1000)
2. Confirma que la hoja tenga datos en las celdas especificadas
3. Revisa que los nombres de columnas coincidan
4. Verifica permisos de lectura en Google Sheets

### Gr√°ficos No Se Actualizan

**Problema**: Visualizaciones permanecen vac√≠as

**Soluciones**:
1. Abre la consola del navegador (F12) para ver errores
2. Verifica que Chart.js se haya cargado correctamente
3. Confirma que los datos tengan el formato correcto

## üì± Compatibilidad

- **Navegadores**: Chrome, Firefox, Safari, Edge (√∫ltimas versiones)
- **Dispositivos**: Desktop, tablet, m√≥vil
- **Resoluciones**: Responsive design desde 320px

## üîÑ Actualizaciones Autom√°ticas

El dashboard se actualiza autom√°ticamente cuando:
- Cambias filtros
- Haces clic en "Actualizar"
- Se detectan cambios en Google Sheets (manual)

Para actualizaciones autom√°ticas peri√≥dicas, puedes agregar:

```javascript
// En app.js, al final del constructor
setInterval(() => {
    if (this.isConnected) {
        this.refreshData();
    }
}, 300000); // Cada 5 minutos
```

## üìû Soporte

Para problemas t√©cnicos:
1. Revisa la consola del navegador (F12)
2. Verifica la configuraci√≥n de Google Sheets API
3. Confirma la estructura de datos
4. Consulta la documentaci√≥n de Google Sheets API

## üìÑ Licencia

Este proyecto est√° dise√±ado para uso interno de an√°lisis de migraci√≥n de clientes.

---

**¬°Listo para analizar tus datos de migraci√≥n!** üéØ